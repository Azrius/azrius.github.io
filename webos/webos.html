<html>
	<head>
		<style>
			body {
				background-color: #6A3D38;
				color: #998F7C;
				font-family: Euphemia;
				font-size: 9px;
			}
			
			.taskbar-button {
				font-size: 12px;
				cursor: hand;
				margin-left: 5px;
				margin-right: 5px;
			}
		</style>
		
		<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
		
		<script>
			var RAM = {
				terminalLine: 0,
				terminalOpen: 0,
				windowID: 0,
			};
			var SSD = {};
			var terminalCommands = ["test"];
			
			var calculatorFunctions = {
				evaluate_expression: function(){
					document.getElementById("calculator_output").innerHTML = eval(document.getElementById("calculator_expression").value.replace(/^[a-zA-Z]*$/, ""));
				},
			}
			
			setInterval(function(){
				var clock = new Date();
				var timeValues = {
					h: clock.getHours(),
					m: clock.getMinutes(),
				}
				
				document.getElementById("clock").innerHTML = timeValues.h + ": " + timeValues.m;
			}, 500);
			
			function Window(contents, title){
				document.body.innerHTML += "<div id='" + title + "' class='window'></div>";
				$("#" + title).css("background-color", "#201F1D");
				$("#" + title).css("display", "inline-block");
				$("#" + title).css("border-style", "solid");
				$("#" + title).css("border-width", "4px");
				$("#" + title).css("border-color", "#A73E28");
				
				var closeFunc = "$(\"#" + title + "\").remove()";
				var closeButton = "<span onclick='" + closeFunc + "' style='color: #EDDEC9; font-size: 16px; background-color: #A73E28; cursor: pointer;'>[+]</span>";
				var titleBar = "<span style='color: #EDDEC9; font-size: 16px; background-color: #A73E28;'> - " + title.replace(/[0-9]/, "") + " - </span><br />";
				
				document.getElementById(title).innerHTML += closeButton;
				document.getElementById(title).innerHTML += titleBar;
				document.getElementById(title).innerHTML += contents;
			}
			
			function startTerminal(){
				terminalSource = "<div id='output' style='width: 500px; height: 180px;'></div>";
				terminalSource += "<input id='expression' style='font-size: 9px; width: 500px;' />";
				var terminalWindow = new Window(terminalSource, "terminal" + RAM.windowID);
				RAM.windowID += 1;
			}
			
			function startCalculator(){
				calculatorSource = "<input id='calculator_expression' />";
				calculatorSource += "<button id='calculator_submit' onclick='calculatorFunctions.evaluate_expression()'>=</button>";
				calculatorSource += "<div id='calculator_output'></div>";
				var calculatorWindow = new Window(calculatorSource, "calculator" + RAM.windowID);
				RAM.windowID += 1;
			}
			
			function initClock(){
				document.body.innerHTML += "<p id='clock' style='position: absolute; left: 95%; top: -1%;'></p>";
			}
			
			function terminalPrint(text){
				RAM.terminalLine += 1;
				document.getElementById("output").innerHTML += ": " + text + "<br />";
			}
			
			function emulateCommand(command){
				if(RAM.terminalLine >= 14){
					document.getElementById("output").innerHTML = "";
				}
			
				for(var i = 0; i < terminalCommands.length; i++){
					if(terminalCommands[i] == "test"){
						terminalPrint("hello, world");
						document.getElementById("expression").value = "";
						return 0;
					}
				}
				
				document.getElementById("expression").value = "";
				terminalPrint("ERROR[0]: command not found");
			}
			
			$(document).keypress(function(event){
				if(event.which == 13){
					emulateCommand(document.getElementById("expression").value);
				}
			});
			
			$(document).ready(function(){
				$("body").css("overflow", "hidden");
				initClock();
			});
		</script>
	</head>
	
	<body>
		<div id="taskbar" style="width: 102%; height: 20px; margin-top: -7px; margin-left: -10px; color: #EDDEC9; background-color: #000000;"><span>Apps - </span><span class="taskbar-button" onclick="startCalculator()">[c]</span><span class="taskbar-button" onclick="startTerminal()" id="terminalButton">[t]</span></div>
	</body>
</html>
